<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>ETCH-A-SKETCH</h1>
    <div id="bdiv">
        <button id="btn1">Enter size</button>
        <button id="randombtn">Random Colors</button>
        <button id="redbtn">Red</button>
        <button id="greenbtn">Green</button>
        <button id="yellowbtn">Yellow</button>
    </div>
    
    <div class="container"></div>

    <script>
        const container = document.querySelector(".container");
        let currentColor = "blue"; // Default color

        // Create an initial 16x16 div grid
        function createGrid(size) {
            container.innerHTML = "";
            const totalDivs = size * size;

            for (let i = 0; i < totalDivs; i++) {
                const div = document.createElement("div");
                div.classList.add("grid");
                div.addEventListener("mouseover", changeColor);
                container.appendChild(div);
            }

            // Adjust the size of each div to fit in the container
            const gridSize = 960 / size;
            document.querySelectorAll('.grid').forEach(div => {
                div.style.width = `${gridSize}px`;
                div.style.height = `${gridSize}px`;
            });
        }

        function changeColor(event) {
            // Prevent color change if the div is already colored
            if (event.target.style.backgroundColor !== "") {
                return;
            }
            if (currentColor === "random") {
                let r = Math.floor(Math.random() * 256);
                let g = Math.floor(Math.random() * 256);
                let b = Math.floor(Math.random() * 256);
                event.target.style.backgroundColor = `rgb(${r},${g},${b})`;
            } else {
                event.target.style.backgroundColor = currentColor;
            }
        }

        // A button that displays an input box when clicked
        const btn1 = document.getElementById("btn1");
        btn1.addEventListener("click", getUserInput, { once: true });

        function getUserInput() {
            const input = document.createElement("input");
            input.classList.add("input");
            input.setAttribute("id", "input");
            input.setAttribute("type", "number");
            const bdiv = document.getElementById("bdiv");
            bdiv.appendChild(input);

            // If user presses enter it works
            input.addEventListener("keypress", function (event) {
                if (event.key === "Enter") {
                    const size = parseInt(input.value);
                    if (size > 0 && size <= 100) {
                        createGrid(size);
                    }
                }
            });

            // Another event to submit the input
            btn1.addEventListener("click", () => {
                const size = parseInt(input.value);
                if (size > 0 && size <= 100) {
                    createGrid(size);
                }
            });
        }

        // Color button event listeners
        document.getElementById("redbtn").addEventListener("click", () => {
            currentColor = "red";
        });

        document.getElementById("greenbtn").addEventListener("click", () => {
            currentColor = "green";
        });

        document.getElementById("yellowbtn").addEventListener("click", () => {
            currentColor = "yellow";
        });

        document.getElementById("randombtn").addEventListener("click", () => {
            currentColor = "random"; // Set the current color to random
        });

        // Create the initial grid
        createGrid(16);
    </script>
</body>
</html>
